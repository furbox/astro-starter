---
interface Props {
    type: "login" | "register";
}

const { type } = Astro.props;
---

<div class="max-w-md w-full mx-auto bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-2xl text-dark-500 font-bold text-center mb-6">
        {type === "login" ? "Iniciar Sesión" : "Crear Cuenta"}
    </h2>

    <form class="space-y-4" id={`${type}-form`}>
        {
            type === "register" && (
                <div>
                    <label
                        for="name"
                        class="block text-sm font-medium text-gray-700"
                    >
                        Nombre
                    </label>
                    <input
                        type="text"
                        id="name"
                        name="name"
                        required
                        class="mt-1 p-2 text-dark-600 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"
                    />
                </div>
            )
        }

        <div>
            <label for="email" class="block text-sm font-medium text-gray-700"
                >Email</label
            >
            <input
                type="email"
                id="email"
                name="email"
                required
                class="mt-1 p-2 text-dark-600  block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"
            />
        </div>

        <div>
            <label
                for="password"
                class="block text-sm font-medium text-gray-700"
                >Contraseña</label
            >
            <input
                type="password"
                id="password"
                name="password"
                required
                minlength="6"
                class="mt-1 p-2 text-dark-600 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"
            />
        </div>

        <button
            type="submit"
            class="w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
        >
            {type === "login" ? "Iniciar Sesión" : "Registrarse"}
        </button>
    </form>

    <p class="mt-4 text-center text-sm text-gray-600">
        {
            type === "login" ? (
                <>
                    ¿No tienes una cuenta?{" "}
                    <a
                        href="/registro"
                        class="font-medium text-primary hover:text-secondary"
                    >
                        Regístrate aquí
                    </a>
                </>
            ) : (
                <>
                    ¿Ya tienes una cuenta?{" "}
                    <a
                        href="/login"
                        class="font-medium text-primary hover:text-secondary"
                    >
                        Inicia sesión
                    </a>
                </>
            )
        }
    </p>
</div>

<script define:vars={{ type }}>
    document.getElementById(`${type}-form`).addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());

        // Here you would typically make an API call to your backend
        console.log("Form submitted:", data);
        alert("Funcionalidad de autenticación no implementada");
    });
</script>
